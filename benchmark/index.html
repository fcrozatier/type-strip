<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmark Results</title>
    <style>
      html, body {
        height: 100%;
      }
      body {
        display: grid;
        place-items: center;
      }
      svg {
        font-family: system-ui;
        display: block;
      }
      .title {
        font-size: 18px;
        font-weight: bold;
        text-anchor: middle;
      }
      .line-plot {
        fill: none;
        stroke-width: 1;
      }
      .axis {
        stroke: #000;
        stroke-width: 1;
      }
      .tick {
        stroke: black;
        stroke-width: 1;
      }
      .label {
        font-size: 12px;
        text-anchor: middle;
      }
      .legend-label {
        font-size: 13px;
        text-anchor: start;
      }
      .axis-label {
        font-size: 13px;
        font-weight: bold;
        text-anchor: end;
      }
      .grid {
        stroke: #ddd;
        stroke-width: 1;
      }
      .ruler {
        stroke: gray;
        stroke-dasharray: 4;
        stroke-width: 1;
        visibility: hidden;
      }
      .tooltip {
        font-size: 10px;
        fill: white;
        stroke: black;
        stroke-width: 0.5;
        visibility: hidden;
        pointer-events: none;
      }
      .tooltip-text {
        font-variant-numeric: tabular-nums;
        text-anchor: start;
      }
      .esbuild {
        stroke: orange;
      }
      .type-strip {
        stroke: blue;
      }
    </style>
  </head>
  <body>
    <svg
      width="1000"
      height="500"
      viewBox="-20 -5 1010 520"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <!-- Arrow Tip -->
        <marker
          id="arrow"
          markerWidth="10"
          markerHeight="10"
          refX="5"
          refY="5"
          orient="auto-start-reverse"
        >
          <path d="M0,0 L10,5 L0,10 Z" fill="black" />
        </marker>
      </defs>

      <!-- Title -->
      <text x="500" y="8" class="title">
        Benchmarking Type-Strip and Esbuild speed
      </text>

      <!-- X-axis -->
      <line
        x1="0"
        y1="500"
        x2="1000"
        y2="500"
        class="axis"
        marker-end="url(#arrow)"
      />
      <!-- X-Axis Label -->
      <text x="1005" y="490" class="axis-label">Lines of code</text>
      <!-- Y-axis -->
      <line
        x1="0"
        y1="0"
        x2="0"
        y2="500"
        class="axis"
        marker-start="url(#arrow)"
      />
      <!-- Y-Axis Label -->
      <text x="75" y="5" class="axis-label">Time (ms)</text>

      <!-- X-Axis Ticks -->
      <g>
        <line x1="100" y1="500" x2="100" y2="495" class="tick" />
        <line x1="200" y1="500" x2="200" y2="495" class="tick" />
        <line x1="300" y1="500" x2="300" y2="495" class="tick" />
        <line x1="400" y1="500" x2="400" y2="495" class="tick" />
        <line x1="500" y1="500" x2="500" y2="495" class="tick" />
        <line x1="600" y1="500" x2="600" y2="495" class="tick" />
        <line x1="700" y1="500" x2="700" y2="495" class="tick" />
        <line x1="800" y1="500" x2="800" y2="495" class="tick" />
        <line x1="900" y1="500" x2="900" y2="495" class="tick" />

        <text x="100" y="515" class="label">200</text>
        <text x="200" y="515" class="label">400</text>
        <text x="300" y="515" class="label">600</text>
        <text x="400" y="515" class="label">800</text>
        <text x="500" y="515" class="label">1000</text>
        <text x="600" y="515" class="label">1200</text>
        <text x="700" y="515" class="label">1400</text>
        <text x="800" y="515" class="label">1600</text>
        <text x="900" y="515" class="label">1800</text>
      </g>

      <!-- Grid lines -->
      <line x1="0" y1="125" x2="1000" y2="125" class="grid" />
      <line x1="0" y1="250" x2="1000" y2="250" class="grid" />
      <line x1="0" y1="375" x2="1000" y2="375" class="grid" />

      <!-- Y-Axis Ticks -->
      <g>
        <line x1="0" y1="125" x2="5" y2="125" class="tick" />
        <line x1="0" y1="250" x2="5" y2="250" class="tick" />
        <line x1="0" y1="375" x2="5" y2="375" class="tick" />

        <line x1="0" y1="62.5" x2="5" y2="62.5" class="tick" />
        <line x1="0" y1="187.5" x2="5" y2="187.5" class="tick" />
        <line x1="0" y1="312.5" x2="5" y2="312.5" class="tick" />
        <line x1="0" y1="437.5" x2="5" y2="437.5" class="tick" />

        <text x="-10" y="128" class="label">3</text>
        <text x="-10" y="253" class="label">2</text>
        <text x="-10" y="378" class="label">1</text>
      </g>

      <!-- Legend -->
      <g>
        <!-- Type-Strip -->
        <line x1="40" y1="50" x2="90" y2="50" class="line-plot type-strip">
        </line>
        <text x="100" y="53" class="legend-label">Type-Strip</text>

        <!-- Esbuild -->
        <line x1="40" y1="70" x2="90" y2="70" class="line-plot esbuild"></line>
        <text x="100" y="73" class="legend-label">Esbuild</text>
      </g>

      <!-- Rulers -->
      <line id="vertical-ruler" class="ruler" x1="0" y1="20" x2="0" y2="500">
      </line>
      <line id="horizontal-ruler" class="ruler" x1="0" y1="0" x2="2000" y2="0">
      </line>

      <!-- Tooltip -->
      <g id="tooltip" class="tooltip">
        <rect x="0" y="0" width="115" height="20" rx="4" ry="4"></rect>
        <text id="tooltip-text" class="tooltip-text" x="8" y="12">Data</text>
      </g>

      <!-- Data -->
      <polyline
        class="type-strip line-plot"
        points="4.5,498.097375 8.5,494.507375 15,491.394 17.5,490.807 20,489.055375 28,486.90825 32,486.089125 38.5,484.177875 40,480.975875 42,481.133375 43,478.39549999999997 44,481.619875 46,475.505375 61,467.97024999999996 69,470.4865 76.5,467.4695 84,465.87475 94.5,463.56762499999996 98,458.906625 100.5,455.992875 106,455.510875 110,453.44612500000005 111,453.48475 112.5,452.677125 117,436.30675 120.5,449.042 121.5,447.305875 122,449.28675000000004 123,449.53625000000005 125.5,445.915 126,447.279125 126.5,447.03925 127.5,447.37275 132.5,443.366 133.5,443.9535 135,441.918875 136,441.75175 137,435.82875 138.5,440.917375 142,439.63975 145.5,438.123125 149.5,433.53875 156,431.4035 158.5,430.844375 161,428.845875 169,426.10787500000004 173,425.66587499999997 179.5,422.477125 181,421.657625 183,422.3785 184,418.81887500000005 185,418.475875 187,419.3785 202,413.63149999999996 210,408.54962500000005 217.5,407.01787499999995 225,404.01775000000004 235.5,402.796 239,400.167875 241.5,398.84037500000005 247,394.42175000000003 251,393.37425 252,393.234625 253.5,392.306625 258,391.953875 261.5,389.53775 262.5,389.2395 263,386.605125 264,390.223125 266.5,387.35037500000004 267,388.40675000000005 267.5,385.19225 268.5,387.93037499999997 273.5,384.560125 274.5,383.81399999999996 276,385.247875 277,384.469625 278,381.747 279.5,383.393125 283,380.22725 286.5,380.631125 290.5,373.812875 297,372.89675 299.5,370.232375 302,371.6125 310,368.20599999999996 314,368.13475 320.5,365.205 322,362.75037499999996 324,364.070625 325,362.509625 326,362.67 328,360.95437499999997 343,354.073875 351,351.81787499999996 358.5,348.71925 366,347.26937499999997 376.5,344.297875 380,343.809625 382.5,340.671625 388,338.15099999999995 392,335.572 393,336.068125 394.5,334.63874999999996 399,333.82625 402.5,333.33837500000004 403.5,331.24175 404,331.064125 405,332.769375 407.5,330.21325 408,330.48262500000004 408.5,329.80062499999997 409.5,330.38800000000003 414.5,327.81525 415.5,327.67075 417,312.18625 418,318.68825 419,323.79325000000006 420.5,305.67875 424,324.47024999999996 427.5,322.46787499999994 431.5,315.305 438,314.838 440.5,312.689125 443,312.681125 451,309.59325000000007 455,308.87325 461.5,303.696125 463,305.78099999999995 465,305.111375 466,304.90775 467,303.84225 469,303.131875 484,296.917875 492,293.181875 499.5,290.105125 507,285.10425 517.5,285.34475000000003 521,285.242625 523.5,281.04699999999997 529,273.69437500000004 533,276.289625 534,276.06462500000004 535.5,277.179375 540,272.33712499999996 543.5,274.9855 544.5,273.289875 545,271.805625 546,272.55687500000005 548.5,269.75925 549,269.8145 549.5,269.97150000000005 550.5,269.93350000000004 555.5,258.92175000000003 556.5,267.06737499999997 558,246.95362500000002 559,265.524125 560,265.145625 561.5,264.83212499999996 565,263.17125 568.5,262.07762499999995 572.5,258.95025000000004 579,255.76350000000002 581.5,254.5265 584,253.17362499999996 592,240.87900000000002 596,241.88875000000004 602.5,243.054375 604,246.83262500000004 606,246.76750000000004 607,245.50674999999998 608,245.63987500000002 610,238.86974999999998 625,238.35762499999996 633,234.05824999999996 640.5,231.81762500000002 648,226.33762499999997 658.5,214.37725000000003 662,205.470875 664.5,222.09387500000005 670,217.86062500000003 674,217.96825000000004 675,219.06237499999997 676.5,217.5485 681,217.51 684.5,215.58812499999996 685.5,215.46262500000003 686,209.506125 687,213.10674999999995 689.5,210.6825 690,207.88162499999996 690.5,205.47650000000002 691.5,205.84087499999998 696.5,205.75949999999997 697.5,206.63562499999998 699,198.83225 700,203.355375 701,204.40025 702.5,202.68025 706,198.86087500000005 709.5,190.53424999999996 713.5,195.7275 720,193.854625 722.5,189.027 725,189.51049999999998 733,190.02749999999995 737,189.48762499999998 743.5,184.80362500000004 745,186.12 747,183.40012500000003 748,184.51675 749,181.29500000000004 751,180.78537499999996 766,171.80774999999997 774,171.38799999999998 781.5,165.83075000000002 789,169.07875 799.5,166.18012499999995 803,159.63375000000002 805.5,135.20749999999998 811,155.79550000000003 815,154.715875 816,157.66412499999998 817.5,153.89962500000004 822,154.08537500000003 825.5,149.87224999999998 826.5,154.288125 827,111.8635 828,154.989125 830.5,147.559375 831,148.5885 831.5,147.03662500000004 832.5,148.715875 837.5,146.71449999999996 838.5,143.75 840,145.633625 841,148.18937499999996 842,146.19625000000002 843.5,140.82299999999998 847,147.4665 850.5,144.115375 854.5,134.05712499999998 861,136.34050000000002 863.5,135.53550000000004 866,127.34037500000001 874,129.2705 878,115.36900000000006 884.5,122.50549999999998 886,125.35162500000003 888,122.8575 889,115.505625 890,126.20774999999995 892,117.9305 907,119.33787499999998 915,111.89412499999996 922.5,114.44412500000001 930,103.88150000000002 940.5,94.562125 944,102.70337499999998 946.5,105.072 952,95.42687500000002 956,98.10275000000001 957,98.76012500000003 958.5,92.572125 963,24.67149999999996 966.5,86.75450000000001 967.5,93.28575000000001 968,86.35999999999999 969,70.715625 971.5,67.87337500000001 972,65.77949999999998 972.5,68.47775 973.5,56.155624999999986 978.5,81.16125000000002 979.5,54.949250000000006 981,76.47175 982,77.854125 983,81.30987499999998 984.5,64.97687499999999 987.5,77.26825000000004 "
      />
      <polyline
        class="esbuild line-plot"
        points="4.5,438.29449999999997 8.5,436.263375 15,431.696875 17.5,430.30337499999996 20,425.51737499999996 28,423.88925 32,423.47812500000003 38.5,422.606625 40,421.939375 42,416.88162500000004 43,420.78475 44,410.57925 46,416.77025000000003 61,408.178625 69,406.007 76.5,399.26925 84,400.63687500000003 94.5,399.1365 98,395.666625 100.5,392.92650000000003 106,390.38425 110,385.41875000000005 111,389.909125 112.5,392.966625 117,390.37787499999996 120.5,390.791875 121.5,383.25100000000003 122,384.34137499999997 123,376.069125 125.5,384.315375 126,387.146875 126.5,385.133625 127.5,391.617375 132.5,388.56875 133.5,386.17337499999996 135,388.04525 136,386.83225 137,387.237625 138.5,384.388375 142,386.28499999999997 145.5,383.82225000000005 149.5,378.034875 156,374.469875 158.5,369.57625 161,368.7755 169,368.45862500000004 173,368.729125 179.5,370.953125 181,370.87325000000004 183,371.92012500000004 184,371.01462499999997 185,370.580625 187,369.226625 202,361.511625 210,363.92712500000005 217.5,357.275625 225,352.7535 235.5,350.11274999999995 239,352.291 241.5,345.77887499999997 247,342.002 251,337.3505 252,343.297875 253.5,342.86475 258,338.90037500000005 261.5,339.462625 262.5,337.7635 263,341.46987500000006 264,336.58362500000004 266.5,336.3425 267,336.37424999999996 267.5,335.94975 268.5,335.510125 273.5,337.59475 274.5,338.19374999999997 276,333.178875 277,336.740125 278,336.21175000000005 279.5,335.331875 283,332.964625 286.5,335.16012500000005 290.5,331.0755 297,327.254375 299.5,323.653625 302,325.402375 310,324.44800000000004 314,321.49125 320.5,321.081375 322,318.44937500000003 324,320.26849999999996 325,318.572625 326,322.30012500000004 328,318.504625 343,312.119125 351,306.4175 358.5,302.270375 366,303.90462500000007 376.5,300.261375 380,298.7475 382.5,295.10999999999996 388,289.74350000000004 392,293.291625 393,295.896125 394.5,295.54999999999995 399,290.43225 402.5,296.772125 403.5,294.789375 404,295.1625 405,283.50849999999997 407.5,295.3385 408,287.7955 408.5,287.81125 409.5,288.50149999999996 414.5,285.851375 415.5,292.37975 417,282.7405 418,289.656 419,290.56737499999997 420.5,291.47875 424,280.849625 427.5,284.52125 431.5,283.9425 438,280.67924999999997 440.5,277.28600000000006 443,274.37999999999994 451,270.97700000000003 455,276.17325000000005 461.5,270.50725 463,271.0685 465,268.100375 466,270.1035 467,260.679875 469,260.55087499999996 484,244.388375 492,249.28812500000004 499.5,245.00925 507,242.60899999999995 517.5,244.40337500000004 521,233.82975 523.5,234.02525000000003 529,230.00525 533,234.31687499999998 534,231.07875 535.5,228.32862500000002 540,225.53087499999995 543.5,229.82375 544.5,229.123625 545,232.08800000000002 546,222.6515 548.5,230.08449999999996 549,228.015375 549.5,223.15812499999998 550.5,231.584 555.5,228.64024999999998 556.5,231.56412500000002 558,226.80900000000003 559,213.845 560,219.65025000000006 561.5,219.53337499999998 565,225.44012500000005 568.5,225.38575 572.5,229.64237500000002 579,226.23537499999995 581.5,226.38200000000003 584,201.10275 592,202.53375000000003 596,208.79350000000002 602.5,221.45712500000002 604,219.575625 606,219.550625 607,212.842875 608,216.51325000000006 610,209.963375 625,207.496625 633,203.367625 640.5,206.58625000000004 648,207.78362499999997 658.5,200.44662499999998 662,207.74187500000002 664.5,205.01012500000004 670,207.281875 674,201.27187500000005 675,201.63074999999998 676.5,203.25787500000004 681,202.547125 684.5,205.55275 685.5,202.778125 686,201.48174999999995 687,203.73075000000003 689.5,204.33612499999998 690,193.303375 690.5,199.44250000000002 691.5,199.93462499999998 696.5,198.88375000000002 697.5,198.185 699,202.84087499999998 700,200.25324999999998 701,200.337875 702.5,200.19274999999996 706,198.47949999999997 709.5,194.60975000000002 713.5,194.916625 720,186.438125 722.5,189.816125 725,190.29000000000002 733,187.62224999999998 737,179.65062500000002 743.5,185.91674999999995 745,184.2565 747,185.21212500000001 748,183.2355 749,181.34025000000003 751,184.371625 766,178.54762499999998 774,177.56612500000003 781.5,175.529625 789,175.63600000000002 799.5,155.20650000000003 803,165.51900000000003 805.5,158.265125 811,163.95337500000002 815,162.27687500000005 816,162.04137500000004 817.5,161.159875 822,161.78362499999997 825.5,161.755625 826.5,163.68775000000002 827,155.753 828,161.97325 830.5,164.91899999999998 831,158.60087499999997 831.5,159.44287500000004 832.5,159.32650000000004 837.5,160.2365 838.5,160.93275000000003 840,160.40725 841,159.90575 842,150.9225 843.5,159.313125 847,156.36149999999998 850.5,148.044625 854.5,156.247 861,152.71912500000002 863.5,150.010125 866,154.018375 874,156.65337499999998 878,144.24750000000003 884.5,146.59587499999998 886,146.80937499999996 888,145.52537500000003 889,143.38825000000006 890,139.42062499999997 892,144.063 907,137.42925 915,129.330375 922.5,124.24912500000002 930,120.76299999999995 940.5,117.89237499999999 944,118.94012500000001 946.5,111.29387499999999 952,116.49337500000001 956,112.15462500000001 957,116.20225 958.5,110.35975000000003 963,111.27550000000002 966.5,108.16550000000002 967.5,106.94099999999995 968,112.50574999999996 969,117.53924999999998 971.5,111.872625 972,110.55537500000001 972.5,109.07074999999999 973.5,112.88500000000002 978.5,104.651875 979.5,112.09787500000002 981,110.56662499999997 982,110.03787500000001 983,100.91924999999996 984.5,108.648625 987.5,107.90612499999996 "
      />
    </svg>
    <script>
      const svg = document.querySelector("svg");
      const verticalRuler = document.getElementById("vertical-ruler");
      const horizontalRuler = document.getElementById(
        "horizontal-ruler",
      );
      const tooltip = document.getElementById("tooltip");
      const tooltipText = document.getElementById("tooltip-text");

      svg.addEventListener("mousemove", (e) => {
        const svgRect = svg.getBoundingClientRect();
        const viewBox = svg.viewBox;
        // const widthFactor =
        //   (viewBox.baseVal.width - viewBox.baseVal.x) / svgRect.width; // 1.03
        // const heightFactor =
        //   (viewBox.baseVal.height - viewBox.baseVal.y) / svgRect.height;

        // Make sure the rulers are in the correct place (correct by about the width and height factors)
        const x = (e.clientX - svgRect.left) * 1.04 - 35;
        const y = (e.clientY - svgRect.top) * 1.045 - 7;

        tooltip.style.visibility = "visible";

        // Update rulers
        if (x > 0) {
          verticalRuler.setAttribute("x1", x);
          verticalRuler.setAttribute("x2", x);
          verticalRuler.style.visibility = "visible";
        } else {
          verticalRuler.style.visibility = "hidden";
          horizontalRuler.style.visibility = "hidden";
          tooltip.style.visibility = "hidden";
        }

        if (y > 20 && y < 500) {
          horizontalRuler.setAttribute("y1", y);
          horizontalRuler.setAttribute("y2", y);
          horizontalRuler.style.visibility = "visible";
        } else {
          verticalRuler.style.visibility = "hidden";
          horizontalRuler.style.visibility = "hidden";
          tooltip.style.visibility = "hidden";
        }

        // Update tooltip
        tooltip.setAttribute(
          "transform",
          2 * x > 1700
            ? `translate(${x - 130}, ${y - 35})`
            : `translate(${x + 15}, ${y + 15})`,
        );

        tooltipText.textContent = `${Math.round(x) * 2} lines, ${
          Math.round((1 - y / 500) * 4000) / 1000
        } ms`;
      });

      svg.addEventListener("mouseleave", () => {
        verticalRuler.style.visibility = "hidden";
        horizontalRuler.style.visibility = "hidden";
        tooltip.style.visibility = "hidden";
      });
    </script>
  </body>
</html>
